<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <title>–ë–∞“ì–∞–ª–∞—É —Ñ–æ—Ä–º–∞—Å—ã</title>
</head>
<body>
    <h1>–û“õ—É—à—ã–Ω—ã –±–∞“ì–∞–ª–∞—É</h1>

    <table id="scoreTable" border="1">
        <thead>
            <tr>
                <th>–ê—Ç—ã</th>
                <th>–ë–∞“ì–∞ 1</th>
                <th>–ë–∞“ì–∞ 2</th>
                <th>–ë–∞“ì–∞ 3</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>–û“õ—É—à—ã 1</td>
                <td><input type="number" class="score" min="1" max="3"></td>
                <td><input type="number" class="score" min="1" max="3"></td>
                <td><input type="number" class="score" min="1" max="3"></td>
            </tr>
            <tr>
                <td>–û“õ—É—à—ã 2</td>
                <td><input type="number" class="score" min="1" max="3"></td>
                <td><input type="number" class="score" min="1" max="3"></td>
                <td><input type="number" class="score" min="1" max="3"></td>
            </tr>
        </tbody>
    </table>

    <button onclick="calculateScores()">“∞–ø–∞–π–ª–∞—Ä–¥—ã –µ—Å–µ–ø—Ç–µ—É</button>
    <button onclick="showResults()">–ù”ô—Ç–∏–∂–µ–ª–µ—Ä–¥—ñ –∫”©—Ä—É</button>

    <div id="resultsSection" style="display: none;">
        <h2>–ù”ô—Ç–∏–∂–µ–ª–µ—Ä:</h2>
        <ul id="resultsList"></ul>
    </div>

    <hr>

    <h2>–ü—ñ–∫—ñ—Ä “õ–∞–ª–¥—ã—Ä—É</h2>
    <form id="feedbackForm">
        <input type="text" id="name" placeholder="–ê—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑" required><br><br>
        <textarea id="comment" placeholder="–ü—ñ–∫—ñ—Ä—ñ“£—ñ–∑" required></textarea><br><br>
        <button type="submit">–ñ—ñ–±–µ—Ä—É</button>
    </form>

    <!-- Firebase SDK “õ–æ—Å—É -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        // üî• Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è“£—ã–∑–¥—ã –ú–´–ù–ê“í–ê –∞—É—ã—Å—Ç—ã—Ä—ã“£—ã–∑
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Firebase –±–∞—Å—Ç–∞—É
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function calculateScores() {
            const rows = document.querySelectorAll("#scoreTable tbody tr");
            const results = document.getElementById("resultsList");
            results.innerHTML = "";

            rows.forEach((row) => {
                const inputs = row.querySelectorAll(".score");
                let total = 0;
                inputs.forEach(input => {
                    let val = parseInt(input.value);
                    if (!isNaN(val) && val >= 1 && val <= 3) {
                        total += val;
                    }
                });
                const li = document.createElement("li");
                li.textContent = `${row.cells[0].textContent}: –ñ–∞–ª–ø—ã “±–ø–∞–π ‚Äì ${total}`;
                results.appendChild(li);
            });
        }

        function showResults() {
            const password = prompt("“ö“±–ø–∏—è —Å”©–∑–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑:");
            if (password === "Irrada") {
                document.getElementById("resultsSection").style.display = "block";
            } else {
                alert("“ö“±–ø–∏—è —Å”©–∑ –¥“±—Ä—ã—Å –µ–º–µ—Å!");
            }
        }

        // –ü—ñ–∫—ñ—Ä–¥—ñ Firebase-–∫–µ —Å–∞“õ—Ç–∞—É
        document.getElementById("feedbackForm").addEventListener("submit", function(e) {
            e.preventDefault();

            const name = document.getElementById("name").value;
            const comment = document.getElementById("comment").value;

            if (!name || !comment) {
                alert("–ë–∞—Ä–ª—ã“õ ”©—Ä—ñ—Å—Ç–µ—Ä–¥—ñ —Ç–æ–ª—Ç—ã—Ä—ã“£—ã–∑.");
                return;
            }

            const feedbackData = {
                name: name,
                comment: comment,
                timestamp: new Date().toISOString()
            };

            firebase.database().ref("feedbacks").push(feedbackData)
                .then(() => {
                    alert("–ü—ñ–∫—ñ—Ä—ñ“£—ñ–∑ “õ–∞–±—ã–ª–¥–∞–Ω–¥—ã! –†–∞“õ–º–µ—Ç!");
                    document.getElementById("feedbackForm").reset();
                })
                .catch((error) => {
                    console.error("“ö–∞—Ç–µ:", error);
                    alert("–ü—ñ–∫—ñ—Ä –∂—ñ–±–µ—Ä—É —Å”ô—Ç—Å—ñ–∑ –±–æ–ª–¥—ã.");
                });
        });
    </script>
</body>
</html>
